<div class="card">
  <div class="card-header display-5"> 
    <%= @article.title %>
  </div>

  <div class="card-body article">
    <div class="card-text">
      <%= simple_format( @article.body ) %>
    </div>
  </div>

  <div class="card-body">
    <div class="card text-bg-secondary mb-3">
      <div class="card-header text-bg-primary display-6"
           style="font-size: 1.5rem; margin-bottom: 0.5rem;"> Comments </div>

      <% ( @article.comments.count ).times do | j | %>
        <% cmnt = @article.comments[ j ] %> 
        <div class="comment-container">
          <span class="badge text-bg-primary"
                style="margin-right: 0.4rem;">
            <%= cmnt.commenter %>
          </span>
          <span class="fst-italic">
            <%= cmnt.body %>
          </span>
        </div>
      <% end %>
    </div>
        
    <h2> <span class="badge text-bg-info"> new </span>
         <span class="fst-italic"> comment </span> </h2>

    <%= form_with model: [ @article, @comment ], 
                  data: { turbo: false } do | form | %>
      <%# display save errors if any %>
      <% @comment.errors.full_messages().each do | msg | %>
        <div class="alert alert-info"> <%= msg %> </div>
      <% end %>
      <div class="form-group mb-2">
        <%= form.label :commenter, class: "form-label" %>
        <%= form.text_field :commenter, class: "form-control" %>
      </div>
      <div class="form-group mb-3">
        <%= form.label :body, class: "form-label" %>
        <%= form.text_area :body, class: "form-control", 
                                  size: "60x8" %>
      </div>
      <%= form.submit class: "btn btn-primary" %>
    <% end %>
  </div>

  <div class="card-footer">
      <%= link_to "Edit", edit_article_path( @article ), 
                   class: "btn btn-outline-primary",
                   style: "margin-right: 0.8rem;"%>
      <%= link_to "Delete", article_path( @article ), 
                   data: {
                       turbo_method: :delete,
                       turbo_confirm: "Are you sure?",
                   }, 
                   class: "btn btn-danger" %>
  </div>
</div>
